<html><head><title>dynamics-client</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="aappddeevv" /><meta name="description" content="A Microsoft Dynamics CLI swiss-army knife and browser/server library." /><meta name="og:image" content="/dynamics-client/img/poster.png" /><meta name="og:title" content="dynamics-client" /><meta name="og:site_name" content="dynamics-client" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A Microsoft Dynamics CLI swiss-army knife and browser/server library." /><link rel="icon" type="image/png" href="/dynamics-client/img/favicon.png" /><meta name="twitter:title" content="dynamics-client" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="A Microsoft Dynamics CLI swiss-army knife and browser/server library." /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/dynamics-client/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/dynamics-client/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/dynamics-client/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/dynamics-client/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/dynamics-client/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/dynamics-client/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/dynamics-client/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/dynamics-client/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/dynamics-client/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/dynamics-client/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/dynamics-client/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/dynamics-client/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/dynamics-client/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/dynamics-client/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/dynamics-client/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/dynamics-client/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/dynamics-client/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/dynamics-client/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/dynamics-client/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/dynamics-client/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/dynamics-client/highlight/styles/default.css" /><link rel="stylesheet" href="/dynamics-client/css/style.css" /><link rel="stylesheet" href="/dynamics-client/css/palette.css" /><link rel="stylesheet" href="/dynamics-client/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/dynamics-client/" class="brand"><div class="brand-wrapper"><span>dynamics-client</span></div></a></li> <li><a href="/dynamics-client/docs/index.html" class="">Getting Started</a></li> <li><a href="/dynamics-client/docs/actions.html" class="">actions</a></li> <li><a href="/dynamics-client/docs/entity.html" class="">entity</a></li> <li><a href="/dynamics-client/docs/importdata.html" class=" active ">importdata</a></li> <li><a href="/dynamics-client/docs/importmaps.html" class="">importmaps</a></li> <li><a href="/dynamics-client/docs/plugins.html" class="">plugins</a></li> <li><a href="/dynamics-client/docs/settings.html" class="">settings</a></li> <li><a href="/dynamics-client/docs/solutions.html" class="">solutions</a></li> <li><a href="/dynamics-client/docs/systemjobs.html" class="">systemjobs</a></li> <li><a href="/dynamics-client/docs/update.html" class="">update</a></li> <li><a href="/dynamics-client/docs/users.html" class="">users</a></li> <li><a href="/dynamics-client/docs/webresources.html" class="">webresources</a></li> <li><a href="/dynamics-client/docs/workflow.html" class="">workflows</a></li> <li><a href="/dynamics-client/docs/creatingacustomcli.html" class="">Create your own CLI</a></li> <li><a href="/dynamics-client/docs/etl.html" class="">ETL</a></li> <li><a href="/dynamics-client/docs/solutiondeployment.html" class="">Create Your Own Solution Deployer Script</a></li></ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/aappddeevv/dynamics-client"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/aappddeevv/dynamics-client"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('dynamics-client A Microsoft Dynamics CLI swiss-army knife and browser/server library.');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('dynamics-client A Microsoft Dynamics CLI swiss-army knife and browser/server library.');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="aappddeevv" data-github-repo="dynamics-client"><div class="content-wrapper"><section><p>importdata allows you to importdata. Combined with other CLI programs such as
csv_splitter.py (included) and the program “parallel”, you can easily create and
execute parallel loads using the standard data import facility. This allows you
to import a substantial amount of data quickly using the standard data import
wizard design tools on the dynamics platform. Most importantly its free and you
do not need to engage expensive ETL developers. If you are able to load data
through a spreadsheet, you can use <code class="highlighter-rouge">importdata</code> to perform high-speed loading.</p>

<p>“parallel” is a program you can install on both Windows, Linux and MacOS systems to run commands in parallel.</p>

<p>To import gigabytes of data quickly, break your load .csv load files into
smaller portions below the 22 MB import limit for dynamics online, then use
parallel to run dynamicscli in parallel. For example, if you have a large file
that is broken into 40 chunks, you can use parallel to load 10 chunks
simultaneously. If one chunk finishes earlier than the others, parallel starts
running another chunk.</p>

<p>You will need to find the limit of your system, some online systems during
certain parts of the day are more tolerant of fast data loading than other
times. A small amount of experimentaton to determine the optimal # chunks/#
simultaneous chunk combinations.</p>

<h2 id="subcommands">Subcommands</h2>
<ul>
  <li>list-imports: List imports, status and ownership information for an import job.</li>
  <li>list-importfiles: List import files. These are typically created as part of creating an import job. You should run this command when you want to see the status of the import files e.g. what’s being processed, error counts, etc.</li>
  <li>dump-errors: Dump detailed info about importfiles that import errors. In the UI, you can only export the rows, this dump gets everything.</li>
  <li>bulkdelete: Create a bulkdelete job from a query file.</li>
  <li>delete: Delete imports (jobs) by name.</li>
  <li>import: Import data. Specify a data file and an available import map. The
import map must already be loaded.</li>
  <li>resume: Resume in imported job at the last processing stage. I’m not sure how
well this works.</li>
</ul>

<h2 id="delete">delete</h2>

<p>delete is often used after a bad import. It can be just as fast as a bulk delete and you can specify the delete query using the web api syntax:</p>

<p>Examples:</p>
<ul>
  <li><code class="highlighter-rouge">dynamicscli entity delete contact --query '/contacts?$select=contactid'</code>: Delete all accounts. Note how the query selects the amount of data it pulls from the server by <em>only</em> specifying the contactid as the returned value.</li>
</ul>

<p>You can also specify the queries to delete from a json file. The keys are used to sort and report back the deletion counts.</p>

<h2 id="import">import</h2>

<p>You can combine this command with <code class="highlighter-rouge">parallel</code> (available for most major OSes) and perform highly parallel loads. Using <code class="highlighter-rouge">csv_splitter.py</code> to split your file into file parts with only 5-10K rows of data each seems to provide a good throughput on loads.</p>

<p>Examples:</p>
<ul>
  <li><code class="highlighter-rouge">dynamicscli entity import accounts.csv accounts-map</code>: Load the CSV file <code class="highlighter-rouge">accounts.csv</code> using the previously loaded import map <code class="highlighter-rouge">accounts-map</code>.</li>
</ul>

<p>If your import does not set the “owner” for the records, they will default to the user performing the import. To change that, use <code class="highlighter-rouge">--recordsownerid &lt;guid&gt;</code>. You can obtain the owner guid from a dump using dynamicscli or by looking at the security views. To dump the systemeuser records, use <code class="highlighter-rouge">dynamicscli entity export-from-query '/systemusers?$select=lastname,firstname,systemuserid' --output-file users.json</code> and look for the user of interest.</p>

<p>Using the <code class="highlighter-rouge">parallel</code> program you can do:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>parallel --jobs 10 --results logs/<span class="o">{</span>/<span class="o">}</span> <span class="nv">$CLI</span> importdata import <span class="o">{}</span> accounts-map ::: <span class="s2">"</span><span class="nv">$DATADIR</span><span class="s2">"</span>/accounts.csv_<span class="k">*</span>.csv
</code></pre>
</div>

<p>The log files for each “part” will be placed into the directory “logs” and each path under logs will represent the “input” files “$DATADIR/accounts.csv_1.csv” and so on. That way, you can see the stdout/stderr for each process that was run.</p>

<p>Where accounts.csv_*.csv are the file parts created by <code class="highlighter-rouge">csv_splitter.py</code> from the file <code class="highlighter-rouge">accounts.csv</code>. The command line looks complex because it uses a “generator” at the end to generate pathnames that are substituted back in the ‘{}’ characters, but don’t let it fool you. The complexity is all about creating log files for each program that is run in parallel with an unique set of arguments, that’s it!.</p>

<p><code class="highlighter-rouge">parallel</code> can  be obtained from:</p>
<ul>
  <li><a href="https://www.gnu.org/software/parallel">GNU parallel</a>: GNU version, written in perl.</li>
  <li><a href="https://github.com/mmstick/parallel">rust parallel rewrite</a>: A GNU parallel clone written in RUST but with the same syntax.</li>
</ul>

<h2 id="list-importfiles">list-importfiles</h2>

<p>List import files. In the example below, DYNAMICS_CRMCONFIG has been set.</p>

<p>Examples:</p>
<ul>
  <li><code class="highlighter-rouge">dynamicscli importdata list-importfiles</code></li>
</ul>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/dynamics-client/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/dynamics-client/js/main.js"></script></body></html>