<html><head><title>dynamics-client: Manage themes</title><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="author" content="aappddeevv" /><meta name="description" content="A Microsoft Dynamics CLI swiss-army knife and browser/server library." /><meta name="og:image" content="/dynamics-client/img/poster.png" /><meta name="og:title" content="dynamics-client: Manage themes" /><meta name="og:site_name" content="dynamics-client" /><meta name="og:url" content="" /><meta name="og:type" content="website" /><meta name="og:description" content="A Microsoft Dynamics CLI swiss-army knife and browser/server library." /><link rel="icon" type="image/png" href="/dynamics-client/img/favicon.png" /><meta name="twitter:title" content="dynamics-client: Manage themes" /><meta name="twitter:image" content="img/poster.png" /><meta name="twitter:description" content="A Microsoft Dynamics CLI swiss-army knife and browser/server library." /><meta name="twitter:card" content="summary_large_image" /><link rel="icon" type="image/png" sizes="16x16" href="/dynamics-client/img/favicon16x16.png" /><link rel="icon" type="image/png" sizes="24x24" href="/dynamics-client/img/favicon24x24.png" /><link rel="icon" type="image/png" sizes="32x32" href="/dynamics-client/img/favicon32x32.png" /><link rel="icon" type="image/png" sizes="48x48" href="/dynamics-client/img/favicon48x48.png" /><link rel="icon" type="image/png" sizes="57x57" href="/dynamics-client/img/favicon57x57.png" /><link rel="icon" type="image/png" sizes="60x60" href="/dynamics-client/img/favicon60x60.png" /><link rel="icon" type="image/png" sizes="64x64" href="/dynamics-client/img/favicon64x64.png" /><link rel="icon" type="image/png" sizes="70x70" href="/dynamics-client/img/favicon70x70.png" /><link rel="icon" type="image/png" sizes="72x72" href="/dynamics-client/img/favicon72x72.png" /><link rel="icon" type="image/png" sizes="76x76" href="/dynamics-client/img/favicon76x76.png" /><link rel="icon" type="image/png" sizes="96x96" href="/dynamics-client/img/favicon96x96.png" /><link rel="icon" type="image/png" sizes="114x114" href="/dynamics-client/img/favicon114x114.png" /><link rel="icon" type="image/png" sizes="120x120" href="/dynamics-client/img/favicon120x120.png" /><link rel="icon" type="image/png" sizes="128x128" href="/dynamics-client/img/favicon128x128.png" /><link rel="icon" type="image/png" sizes="144x144" href="/dynamics-client/img/favicon144x144.png" /><link rel="icon" type="image/png" sizes="150x150" href="/dynamics-client/img/favicon150x150.png" /><link rel="icon" type="image/png" sizes="152x152" href="/dynamics-client/img/favicon152x152.png" /><link rel="icon" type="image/png" sizes="196x196" href="/dynamics-client/img/favicon196x196.png" /><link rel="icon" type="image/png" sizes="310x310" href="/dynamics-client/img/favicon310x310.png" /><link rel="icon" type="image/png" sizes="310x150" href="/dynamics-client/img/favicon310x150.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/dynamics-client/highlight/styles/default.css" /><link rel="stylesheet" href="/dynamics-client/css/style.css" /><link rel="stylesheet" href="/dynamics-client/css/palette.css" /><link rel="stylesheet" href="/dynamics-client/css/codemirror.css" /></head><body class="docs"><div id="wrapper"><div id="sidebar-wrapper"><ul id="sidebar" class="sidebar-nav"><li class="sidebar-brand"><a href="/dynamics-client/" class="brand"><div class="brand-wrapper"><span>dynamics-client</span></div></a></li>                   </ul></div><div id="page-content-wrapper"><div class="nav"><div class="container-fluid"><div class="row"><div class="col-lg-12"><div class="action-menu pull-left clearfix"><a href="#menu-toggle" id="menu-toggle"><i class="fa fa-bars" aria-hidden="true"></i></a></div><ul class="pull-right"><li id="gh-eyes-item" class="hidden-xs"><a href="https://github.com/aappddeevv/dynamics-client"><i class="fa fa-eye"></i><span>WATCH<span id="eyes" class="label label-default">--</span></span></a></li><li id="gh-stars-item" class="hidden-xs"><a href="https://github.com/aappddeevv/dynamics-client"><i class="fa fa-star-o"></i><span>STARS<span id="stars" class="label label-default">--</span></span></a></li><li><a href="#" onclick="shareSiteTwitter('dynamics-client A Microsoft Dynamics CLI swiss-army knife and browser/server library.');"><i class="fa fa-twitter"></i></a></li><li><a href="#" onclick="shareSiteFacebook('dynamics-client A Microsoft Dynamics CLI swiss-army knife and browser/server library.');"><i class="fa fa-facebook"></i></a></li><li><a href="#" onclick="shareSiteGoogle();"><i class="fa fa-google-plus"></i></a></li></ul></div></div></div></div><div id="content" data-github-owner="aappddeevv" data-github-repo="dynamics-client"><div class="content-wrapper"><section><h1 id="managing-themes">Managing themes</h1>

<p>Themes are small configuration records that hold colors and a link to a
webresource that acts as the logo. It is typical that you want to change the
logo for an instance. The logo change requires you to manually clone a theme,
identify the webresource, then publish it. Once published, the “clone” becomes
the current “default” theme used by all applications.</p>

<p>We can dump the theme data:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="nv">$dynamicscli</span> entity <span class="nb">export</span>-from-query <span class="s2">"/themes"</span> --outputfile themes.json
</code></pre>
</div>

<p>This produces a file with “streaming json” records.</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="nt">"@odata.etag"</span><span class="p">:</span><span class="s2">"W/\"33016994\""</span><span class="p">,</span><span class="nt">"defaultentitycolor"</span><span class="p">:</span><span class="s2">"#666666"</span><span class="p">,</span><span class="nt">"statecode"</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="nt">"defaultcustomentitycolor"</span><span class="p">:</span><span class="s2">"#00CCA3"</span><span class="p">,</span><span class="nt">"statuscode"</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span><span class="nt">"logotooltip"</span><span class="p">:</span><span class="s2">"Microsoft Dynamics 365"</span><span class="p">,</span><span class="nt">"controlborder"</span><span class="p">:</span><span class="s2">"#BDC3C7"</span><span class="p">,</span><span class="nt">"controlshade"</span><span class="p">:</span><span class="s2">"#FFFFFF"</span><span class="p">,</span><span class="nt">"selectedlinkeffect"</span><span class="p">:</span><span class="s2">"#F8FAFC"</span><span class="p">,</span><span class="nt">"globallinkcolor"</span><span class="p">:</span><span class="s2">"#1160B7"</span><span class="p">,</span><span class="nt">"processcontrolcolor"</span><span class="p">:</span><span class="s2">"#358717"</span><span class="p">,</span><span class="nt">"name"</span><span class="p">:</span><span class="s2">"CRM Blue Theme"</span><span class="p">,</span><span class="nt">"headercolor"</span><span class="p">:</span><span class="s2">"#0078D7"</span><span class="p">,</span><span class="nt">"versionnumber"</span><span class="p">:</span><span class="mi">33016994</span><span class="p">,</span><span class="nt">"createdon"</span><span class="p">:</span><span class="s2">"2018-03-13T11:13:22Z"</span><span class="p">,</span><span class="nt">"panelheaderbackgroundcolor"</span><span class="p">:</span><span class="s2">"#F3F3F3"</span><span class="p">,</span><span class="nt">"hoverlinkeffect"</span><span class="p">:</span><span class="s2">"#E7EFF7"</span><span class="p">,</span><span class="nt">"navbarshelfcolor"</span><span class="p">:</span><span class="s2">"#FFFFFF"</span><span class="p">,</span><span class="nt">"backgroundcolor"</span><span class="p">:</span><span class="s2">"#FFFFFF"</span><span class="p">,</span><span class="nt">"_modifiedby_value"</span><span class="p">:</span><span class="s2">"89fd39c6-1c2c-45ac-be07-e3d304191866"</span><span class="p">,</span><span class="nt">"modifiedon"</span><span class="p">:</span><span class="s2">"2018-04-22T06:36:36Z"</span><span class="p">,</span><span class="nt">"_organizationid_value"</span><span class="p">:</span><span class="s2">"8758de86-3bbb-4f6f-b17a-42182bb1bca2"</span><span class="p">,</span><span class="nt">"accentcolor"</span><span class="p">:</span><span class="s2">"#E83D0F"</span><span class="p">,</span><span class="nt">"isdefaulttheme"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nt">"themeid"</span><span class="p">:</span><span class="s2">"581ba8b5-f3cf-422e-8030-e2a645b39971"</span><span class="p">,</span><span class="nt">"_createdonbehalfby_value"</span><span class="p">:</span><span class="s2">"89fd39c6-1c2c-45ac-be07-e3d304191866"</span><span class="p">,</span><span class="nt">"_createdby_value"</span><span class="p">:</span><span class="s2">"89fd39c6-1c2c-45ac-be07-e3d304191866"</span><span class="p">,</span><span class="nt">"pageheaderbackgroundcolor"</span><span class="p">:</span><span class="s2">"#E0E0E0"</span><span class="p">,</span><span class="nt">"maincolor"</span><span class="p">:</span><span class="s2">"#3B79B7"</span><span class="p">,</span><span class="nt">"type"</span><span class="p">:</span><span class="kc">false</span><span class="p">,</span><span class="nt">"navbarbackgroundcolor"</span><span class="p">:</span><span class="s2">"#0078D7"</span><span class="p">,</span><span class="nt">"_logoid_value"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">"exchangerate"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">"importsequencenumber"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">"overriddencreatedon"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">"_transactioncurrencyid_value"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">"utcconversiontimezonecode"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">"timezoneruleversionnumber"</span><span class="p">:</span><span class="kc">null</span><span class="p">,</span><span class="nt">"_modifiedonbehalfby_value"</span><span class="p">:</span><span class="kc">null</span><span class="p">}</span><span class="w">
</span><span class="err">...more</span><span class="w"> </span><span class="err">json</span><span class="w"> </span><span class="err">theme</span><span class="w"> </span><span class="err">records...</span><span class="w">
</span></code></pre>
</div>

<p>The default theme has <code class="highlighter-rouge">isdefaulttheme</code> true. The above theme is <em>not</em> the
default.</p>

<p>We can now just modify the theme and reload it with our changes. We could use a
CLI to modify the JSON but its easier and more likely, that we want to create a
repeatable load file. In the case below, we change the tooltip the name and the
logo. The id for the logo came from running <code class="highlighter-rouge">dynamicscli webresources list</code> and
looking for our logo id in the listing output.</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code><span class="o">{</span> 
    <span class="s2">"themeid"</span>: <span class="s2">"581ba8b5-f3cf-422e-8030-e2a645b39971"</span>,
    <span class="s2">"logotooltip"</span>: <span class="s2">"My Logo!"</span>,
    <span class="s2">"name"</span>: <span class="s2">"My Company"</span>,
    <span class="s2">"logoimage@odata.bind"</span>: <span class="s2">"/webresources(e9238572-4542-e711-80ff-c4346bac093c)"</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Then update your theme via the CLI:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>dynamicscli update entity themes --pk themeupdate.json
</code></pre>
</div>

<p>This is useful if you are updating the same instance at different times, but the
reality is that when you want to modify a theme, you are usually doing that on a
new org. In this case, you need to clone an existing theme and update it or you
can create a “canned” theme record like the above ensuring that you set all the
values and load that using “update” but setting “–upsertpreventcreate false” to
allow a new record to be created when the themeid is not found. The new record
would have the themeid as specified in the update record.</p>

<p>Fortunately, there is some theme support in dynamicscli. Suppose we want to
change a color and set the icon:</p>
<div class="language-sh highlighter-rouge"><pre class="highlight"><code>// changes.json
<span class="o">{</span> <span class="s2">"navbarshelfcolor"</span>: <span class="s2">"#FAFAFA"</span> <span class="o">}</span>
</code></pre>
</div>

<p>Then we can do:</p>

<div class="language-sh highlighter-rouge"><pre class="highlight"><code>// copy the theme
dynamicscli themes copy <span class="s2">"CRM Default Theme"</span> mytheme --merge-json changes.json

// <span class="nb">set </span>the logo icon, where the <span class="s2">"name"</span> of the logo reflects its virtual path
// a common pattern <span class="k">for </span>naming web resources.
dynamicscli themes <span class="nb">set</span>-logo mytheme <span class="s2">"new_/images/logo.gif"</span>

// publish it
dynamicscli themes publish mytheme
</code></pre>
</div>
</section></div></div></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/dynamics-client/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script><script src="/dynamics-client/js/main.js"></script></body></html>